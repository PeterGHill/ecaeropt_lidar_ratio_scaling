#+title: Tasks for software IFS_aer_opt
#+author: Ramiro Checa-Garcia
#+tags: @aerosols @ecmwf @ecrad @ifs @mie



** General info
   This is a org-mode file to keep track of changes/improvements. It might be changed in the
   future for a ticket system in Jira or Github.

** Usability
   *** DONE Add make files: make install; make clean, make test, make ifs_version

** Reproducibility

*** Refractive Index
**** TODO get the source info for refractive index data
**** DONE repair inconsistency in the files with refractive index regarding wavelength units.
          This is clear for organic aerosol files: inso, waso, soot

*** References
**** TODO add reference to papers/source for each configuration file.
**** DONE All metadata should be extracted from configuration files and setting file. This is important for reproducibility.

*** Automatic testings
**** DONE compare with other/previous netcdf named references.
          In species section in settings file a possible option can be test=true/false, and ref=filename
          so if test=true and reference=filename then it would try to compare results with reference.
**** TODO Idea: if test=false but reference=filename then it will considered a case to store in references folder for future 
          comparisons. Note: I have created a small script with the comparison that can be used for that.
         
**** DONE Create automatic tests for single sphere.
**** TODO compare with Mie code from libRadTran.
	
** Core features

*** Settings
**** TODO -> old and current output formats(?). This will be handle by a flag with IFS version in default section.

*** Legendre => no priority
**** TODO It is needed here to run few simple cases of legendre coeffients to understant the discrepancies.

*** Angles
**** DONE phase function should be optional => a parameter 0,1 can be used for that which can be easily exported to C or Fortran.
**** DONE angles can be specified

*** Mixing (external)
**** DONE evaluate how the engine has to be called. Created a function aer_mixing and tested.

*** Tests
**** DONE test a case with hygroscopic growth cases like soa or su (sulfate)
**** DONE test a case with aerosol mixing

*** Bands:
**** TODO possible feature to add band calculations

*** Store:
**** DONE check if netcdf output filenames are already there, to avoid overwritting
**** DONE check about order dimensions (testing is using now nco to create a consistent file for comparing).
	
** Refactoring

*** TODO MieBB: it is important to refactor, document and improve the mie scattering code.
